# M3内核与rtt调度

## 寄存器组

### 通用目的寄存器

![R0-R12：通用寄存器](M3%E5%86%85%E6%A0%B8%E4%B8%8Ertt%E8%B0%83%E5%BA%A6.assets/image-20220429092238545.png)

#### R0-R12：通用寄存器

R0‐R12 都是32 位通用寄存器，用于数据操作。但是注意：绝大多数16 位Thumb 指令只能访
问R0‐R7，而32 位Thumb‐2 指令可以访问所有寄存器。

#### Banked R13: 两个堆栈指针

​		主堆栈指针（MSP）：复位后缺省使用的堆栈指针，用于操作系统内核以及异常处理例程（包
括中断服务例程）

​		进程堆栈指针（PSP）：由用户的应用程序代码使用

#### R14：连接寄存器

​		当呼叫一个子程序时，由R14 存储返回地址

#### R15：程序计数寄存器

​		指向当前的程序地址。如果修改它的值，就能改变程序的执行流

+++

+++

### 特殊寄存器组

![image-20220429093546292](M3%E5%86%85%E6%A0%B8%E4%B8%8Ertt%E8%B0%83%E5%BA%A6.assets/image-20220429093546292-16511969613043.png)



#### xPSR

​		<img src="M3%E5%86%85%E6%A0%B8%E4%B8%8Ertt%E8%B0%83%E5%BA%A6.assets/image-20220429094608577-16511969671514.png" alt="image-20220429094608577" style="zoom:50%;" />

​						记录ALU标志（0，进位，负数，溢出），执行状态，当前中断号

#### PRIMASK

​		除能所有中断，不包括NMI

#### FAULTMASK

​		除能所有中断，不包括NMI，但被储能中断会上访

#### BASEPRI

​		除能优先级不高于某个数值的中断

![image-20220429094908975](M3%E5%86%85%E6%A0%B8%E4%B8%8Ertt%E8%B0%83%E5%BA%A6.assets/image-20220429094908975-16511969512462.png)



#### CONTROL

​		<img src="M3%E5%86%85%E6%A0%B8%E4%B8%8Ertt%E8%B0%83%E5%BA%A6.assets/image-20220429095232541.png" alt="image-20220429095232541" style="zoom:50%;" />









## 特权及异常

#### 操作模式转换

<img src="M3%E5%86%85%E6%A0%B8%E4%B8%8Ertt%E8%B0%83%E5%BA%A6.assets/image-20220429094353218-16511969757665.png" alt="image-20220429094353218" style="zoom:50%;" />







